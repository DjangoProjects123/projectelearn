{% extends "base.html" %}
{% load static %}
{% block title %}
    Analytics Enrollments
{% endblock %}

{% block extrahead %}
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/css/bootstrap-datepicker.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/js/bootstrap-datepicker.js"></script>

 <script type="text/javascript">
        window.onload = function() { 
       // my django variables go here 
       //i will need an array of courses and the total number of students in it
       var bargroundColors = [
                    'rgba(255,0,0, 0.7)',
                    'rgba(0,200,0, 0.7)',
                    'rgba( 200,255,0,0.7)',
                    'rgba(0,155,255, 0.7)',
                    'rgba(255,0,0, 0.7)',
                    'rgba(0,200,0, 0.7)',
                    'rgba( 200,255,0,0.7)',
                    'rgba(0,155,255, 0.7)',
                    'rgba(255,0,0, 0.7)',
                    'rgba(0,200,0, 0.7)',
                    'rgba( 200,255,0,0.7)',
                    'rgba(0,155,255, 0.7)'
                     
                ]
       var ctx3 = document.getElementById("lineBar").getContext('2d');     
        var myChart = new Chart(ctx3, {
            type: 'line',
            data: {
            labels: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            datasets: [ {
                            
                backgroundColor: [ 'rgba(0,155,255, 0.7)'] ,
                borderColor: [ 'rgba(0,155,255, 0.7)'] ,
                fill: false,                  
                data: [90,23,12,42,53,21,1,3,4,2,65,3]
                },
                {
                borderColor: [ 'rgba(0,255,0, 0.7)'] ,
                data: [70,8,23,54,23,57,43,100]},
                {
                 
                 data: [30,12,4,2,8,45,23,12]},
                 {
                 
                 data: [23,23,76,34,23,67,34,23]}
              ]
             },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero:true
                        }
                    }]
                }
            }
        });
        
    
        var  labels ;
        {%if labelDict %}
            labels = { {% for key ,values in labelDict %}"{{key}}": "{{values}}" , {%endfor%}};
        {%endif%}
                  
     
        var keys = Object.keys(labels);
        for(var i = 0; i < keys.length;i++){
        //keys[i] for key
        //dictionary[keys[i]] for the value
        }
        myChart.data.datasets[i].label = "peter";       
        myChart.update();
    }                     
</script> 


{% endblock  %}
{% block content %}

<!-- Home -->

<div class="home">	 
	</div>

	 
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="section_title text-center">
							<h1>Course Analytics</h1>
						</div>
                        <h1><a href="{% url "manage_course_list" %}">Back to My Courses</a></h1>					</div>
				</div>
	
			
                <!-- Popular -->
<!--displaying the analytics-->
	<div class="popular page_section">
            <div class="container">
                  
                   <div style="margin-top: 80px"></div>
                  <div class="row row-eq-height">
                  

                            <form action="analytics_instructor_courses" method="get">
                                    <span>Select a year: </span><input class="date-own form-control" style="width: 300px;" type="text">
                                    <script type="text/javascript">
                                        $('.date-own').datepicker({
                                            minViewMode: 2,
                                            format: 'yyyy'
                                            }); 
                                    
                                    </script> 
                                    <input type="submit" value="Analyze"/>    
                                </form>
                    
                    <div class="col-lg-10"> 
                           <canvas id="lineBar"  style="height: 100%; max-width:100%; margin: 0px auto;"></canvas>                    
                    </div>
                    <div class="col-lg-2">
                        <ul> 
                               Django test code
                               {% for key,values in labelDict.items %} 

                                <li>{{forloop.counter0}}{{values}} </li>                                 
                                {% endfor %}

                                <script type="test/javascript">
                                {%if labelDict %}
                                   var  labels = { {% for key,values in labelDict.items %}"{{key}}": "{{values}}" , {%endfor%}}
                                {%endif%}
                            </script>
                                

                            {% for home in data_x %}  
                            {% for house in home %} 
                             {{ house }} 
                            {% endfor %}
                            
                        {% endfor %}
                        </ul>  
                                    
                    </div>
                  </div>
            </div>		
        </div>
       </div>		
	 

    
{% endblock %}

{%block domready}  

        
{%endblock}
